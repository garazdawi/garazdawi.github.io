<!DOCTYPE html><html><head><meta charSet="utf-8"/><title>Erlang Programming Language</title><meta http-equiv="Content-Type" content="text/html;charset=utf-8"/><meta name="description" content="Erlang Programming Language"/><meta name="keywords" content="erlang, functional, programming, fault-tolerant, distributed, multi-platform, portable, software, multi-core, smp, concurrency"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="alternate" type="application/rss+xml" title="Overall RSS 2.0 Feed" href="/rss"/><link rel="alternate" type="application/rss+xml" title="News RSS 2.0 Feed" href="/rss/news"/><link rel="alternate" type="application/rss+xml" title="Article RSS 2.0 Feed" href="/rss/articles"/><link rel="alternate" type="application/rss+xml" title="Events RSS 2.0 Feed" href="/rss/event"/><link rel="alternate" type="application/rss+xml" title="Downloads RSS 2.0 Feed" href="/rss/download"/><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><link rel="preload" href="/_next/static/css/f91c265ba4ec340e076d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f91c265ba4ec340e076d.css" data-n-g=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/_next/static/chunks/main-a9a86200c2afaf3f233a.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.9707fddd9ae5927c17c3.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.8b4ad2366e12f882e3d5.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-79f3144d8877c67ce98b.js" as="script"/><link rel="preload" href="/_next/static/chunks/87b308f4a72b1b263da2fe072492c20d1199252a.8368050723e578161621.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/eeps/%5Beep%5D-bde5f12f7c4b26eeb23e.js" as="script"/></head><body><div id="__next"><div class="navbar" style="background-color:#FFF;margin-bottom:0px"><div class="container"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse" style="position:absolute;right:5px;margin-bottom:0px"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/"><img src="/img/erlang.png" width="60"/></a><div class="nav-collapse collapse navbar-responsive-collapse" style="padding:20px"><ul class="nav navbar-nav"><li><a class="menu-headlines" href="/downloads/"> DOWNLOADS </a></li><li><a class="menu-headlines" href="/docs/"> DOCUMENTATION </a></li><li><a class="menu-headlines" href="/community/"> COMMUNITY </a></li><li><a class="menu-headlines" href="/news/"> NEWS </a></li><li><a class="menu-headlines" href="/eeps/"> EEPS </a></li><li><a class="menu-headlines" href="/blog/"> BLOG </a></li><li><a class="menu-headlines" href="/about/"> ABOUT </a></li></ul></div></div></div><div class="container"><div class="row"><div class="col-lg-12"><div class="divider"><p></p></div></div><div class="static_div"><pre><code>Author: Yurii Rashkovskii &lt;yrashk(at)gmail(dot)com&gt;
Status: Draft
Type: Standards Track
Erlang-Version: R15A
Created: 2-Jul-2011
Post-History: 2-Jul-2011
</code></pre>

<hr />

<h2><a href="/eeps/eep-0000" title="EEP Index">EEP</a> 39: <a href="eep-0039.md" title="EEP Source"> Scoped Group Leaders</a></h2>

<h1>Abstract</h1>

<p>Scoped group leaders is an extension of the existing group leader
mechanism that allows one to use the group leader mechanism beyond
its original intent (which is I/O only).</p>

<h1>Specification</h1>

<p>Every process is given a "dictionary" of group leaders, with one
<code>io</code> group leader defined by default, representing the only group
leader that exists currently in Erlang. Every process created is
given a copy of the dictionary exactly as before.</p>

<p>Two new functions have been added to the <code>erlang</code> module.</p>

<p>Firstly, scoped group leader retrieval:</p>

<pre><code>erlang:group_leader(Scope :: atom()) -&gt; 'undefined' | pid()
</code></pre>

<p>This function retrieves the group leader for the scope <code>Scope</code>.  Existing
argument-free function <code>erlang:group_leader/0</code> is now implemented as</p>

<pre><code>erlang:group_leader(io)
</code></pre>

<p>Secondly, scoped group leader setup:</p>

<pre><code>erlang:group_leader(Scope :: atom(), GroupLeader :: pid(),
                                     Proc :: pid()) -&gt; true.
</code></pre>

<p>This function sets the group leader for scope the <code>Scope</code> to the <code>GroupLeader</code>
for a process <code>Proc</code>.  The existing function <code>erlang:group_leader/2</code> is
now implemented as</p>

<pre><code>erlang:group_leader(io, GroupLeader, Proc)
</code></pre>

<p>Process information available through <code>erlang:process_info/1</code> and
<code>erlang:process_info/2</code> has been extended with a new key, <code>group_leaders</code>.
It contains a proplist of group leaders associated with the process given.
The list will at the very least contain the tuple <code>{io, &lt;0.24.0&gt;}</code>
Note: this group leader is currently the default one in every single process.</p>

<p>Distribution mechanism(s) get extended to support these scoped group leaders
as well, so processes spawned on remote nodes get the whole list of group
leaders copied.</p>

<h2>Example</h2>

<p>In this example, we'll set a group leader for the scope of <code>test</code>
and we'll retrieve it from the current and the child processes.
Also, we'll retrieve the <code>io</code> scoped group leader using both the
original and the new API:</p>

<pre><code>1&gt; erlang:group_leader(test, self(), self()).
true
2&gt;  erlang:group_leader().
&lt;0.24.0&gt;
3&gt; erlang:group_leader(io).
&lt;0.24.0&gt;
4&gt; erlang:group_leader(test).
&lt;0.31.0&gt;
5&gt; spawn(fun() -&gt; io:format("~p~n",[erlang:group_leader()]) end), ok.
&lt;0.24.0&gt;
ok
6&gt; spawn(fun() -&gt; io:format("~p~n",[erlang:group_leader(io)]) end), ok.
&lt;0.24.0&gt;
ok
7&gt; spawn(fun() -&gt; io:format("~p~n",[erlang:group_leader(test)]) end), ok.
&lt;0.31.0&gt;
ok
8&gt; spawn(fun() -&gt; io:format("~p~n",[erlang:process_info(self())]) end), ok.
[{current_function,{erl_eval,do_apply,5}},
 {initial_call,{erlang,apply,2}},
 {status,running},
 {message_queue_len,0},
 {messages,[]},
 {links,[]},
 {dictionary,[]},
 {trap_exit,false},
 {error_handler,error_handler},
 {priority,normal},
 {group_leader,&lt;0.24.0&gt;},
 {group_leaders,[{test,&lt;0.31.0&gt;},{io,&lt;0.24.0&gt;}]},
 {total_heap_size,233},
 {heap_size,233},
 {stack_size,24},
 {reductions,93},
 {garbage_collection,[{min_bin_vheap_size,46368},
                      {min_heap_size,233},
                      {fullsweep_after,65535},
                      {minor_gcs,0}]},
 {suspending,[]}]
ok
</code></pre>

<h1>Motivation</h1>

<p>The I/O system is not the only domain where the concept of group leaders
comes in handy.  Implicit configurations, security groups and many other
problems could benefit from being able to extend the standard group leader
mechanism.</p>

<p>One of the potential uses of this technique could be an extension of the
I/O leader paradigm into Web Development, with a <code>web</code> group leader
represented as an HTTP connection, WebSocket, or Session.  With this simple
approach one can use the same technique used by I/O primitives to allow
transparent and/or multiplexed access to other HTTP communication channels,
within either local or remote processes.</p>

<h1>Rationale</h1>

<p>We have chosen to extend the existing API instead of introducing a new one
simply because we believe this concept to be a natural evolution of the
group leaders concept with which people are already familiar.</p>

<h1>Backwards Compatibility</h1>

<p>The proposed changes keep existing API's intact and only provide some new
functions for this pre-described functionality.  While this change maintains
backwards compatibility, the existing behaviour's are not altered and newly
introduced behaviour's are fashioned to mimic existing ones.</p>

<p>The Proplist returned by <code>erlang:process_info/1</code> has all pre-existing keys
unmodified and features, with the addition of a new key called <code>group_leaders</code>.
In the unlikely event that code exists which relies on a specific set of keys
used in this proplist, no backwards compatibility issues should exist.</p>

<h1>Reference Implementation</h1>

<p>There is no reference implementation at this point.  However, a proof
of concept implementation is <a href="https://github.com/spawngrid/otp/tree/group_leader_scope">available</a>.</p>

<h1>Copyright</h1>

<p>This document has been placed in the public domain.</p>
</div></div></div><div class="container"><div class="row"><div class="col-lg-12"><div class="divider"><p></p></div></div><div class="col-lg-12 text-center"><div class="col-lg-4"><a title="DOWNLOAD" href="/download.html"><img src="/img/download.png"/></a></div><div class="col-lg-4"><a href="http://www.github.com/erlang/otp/"><img src="/img/GitHub-Mark-32px.png"/></a></div><div class="col-lg-4"><a href="http://www.twitter.com/erlang_org/"><img src="/img/twitter.png" width="32"/></a></div></div><div class="col-lg-12"><div class="divider"><p></p></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"index":{"id":"0039","content":"\u003cpre\u003e\u003ccode\u003eAuthor: Yurii Rashkovskii \u0026lt;yrashk(at)gmail(dot)com\u0026gt;\nStatus: Draft\nType: Standards Track\nErlang-Version: R15A\nCreated: 2-Jul-2011\nPost-History: 2-Jul-2011\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003chr /\u003e\n\n\u003ch2\u003e\u003ca href=\"/eeps/eep-0000\" title=\"EEP Index\"\u003eEEP\u003c/a\u003e 39: \u003ca href=\"eep-0039.md\" title=\"EEP Source\"\u003e Scoped Group Leaders\u003c/a\u003e\u003c/h2\u003e\n\n\u003ch1\u003eAbstract\u003c/h1\u003e\n\n\u003cp\u003eScoped group leaders is an extension of the existing group leader\nmechanism that allows one to use the group leader mechanism beyond\nits original intent (which is I/O only).\u003c/p\u003e\n\n\u003ch1\u003eSpecification\u003c/h1\u003e\n\n\u003cp\u003eEvery process is given a \"dictionary\" of group leaders, with one\n\u003ccode\u003eio\u003c/code\u003e group leader defined by default, representing the only group\nleader that exists currently in Erlang. Every process created is\ngiven a copy of the dictionary exactly as before.\u003c/p\u003e\n\n\u003cp\u003eTwo new functions have been added to the \u003ccode\u003eerlang\u003c/code\u003e module.\u003c/p\u003e\n\n\u003cp\u003eFirstly, scoped group leader retrieval:\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003eerlang:group_leader(Scope :: atom()) -\u0026gt; 'undefined' | pid()\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003cp\u003eThis function retrieves the group leader for the scope \u003ccode\u003eScope\u003c/code\u003e.  Existing\nargument-free function \u003ccode\u003eerlang:group_leader/0\u003c/code\u003e is now implemented as\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003eerlang:group_leader(io)\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003cp\u003eSecondly, scoped group leader setup:\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003eerlang:group_leader(Scope :: atom(), GroupLeader :: pid(),\n                                     Proc :: pid()) -\u0026gt; true.\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003cp\u003eThis function sets the group leader for scope the \u003ccode\u003eScope\u003c/code\u003e to the \u003ccode\u003eGroupLeader\u003c/code\u003e\nfor a process \u003ccode\u003eProc\u003c/code\u003e.  The existing function \u003ccode\u003eerlang:group_leader/2\u003c/code\u003e is\nnow implemented as\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003eerlang:group_leader(io, GroupLeader, Proc)\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003cp\u003eProcess information available through \u003ccode\u003eerlang:process_info/1\u003c/code\u003e and\n\u003ccode\u003eerlang:process_info/2\u003c/code\u003e has been extended with a new key, \u003ccode\u003egroup_leaders\u003c/code\u003e.\nIt contains a proplist of group leaders associated with the process given.\nThe list will at the very least contain the tuple \u003ccode\u003e{io, \u0026lt;0.24.0\u0026gt;}\u003c/code\u003e\nNote: this group leader is currently the default one in every single process.\u003c/p\u003e\n\n\u003cp\u003eDistribution mechanism(s) get extended to support these scoped group leaders\nas well, so processes spawned on remote nodes get the whole list of group\nleaders copied.\u003c/p\u003e\n\n\u003ch2\u003eExample\u003c/h2\u003e\n\n\u003cp\u003eIn this example, we'll set a group leader for the scope of \u003ccode\u003etest\u003c/code\u003e\nand we'll retrieve it from the current and the child processes.\nAlso, we'll retrieve the \u003ccode\u003eio\u003c/code\u003e scoped group leader using both the\noriginal and the new API:\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003e1\u0026gt; erlang:group_leader(test, self(), self()).\ntrue\n2\u0026gt;  erlang:group_leader().\n\u0026lt;0.24.0\u0026gt;\n3\u0026gt; erlang:group_leader(io).\n\u0026lt;0.24.0\u0026gt;\n4\u0026gt; erlang:group_leader(test).\n\u0026lt;0.31.0\u0026gt;\n5\u0026gt; spawn(fun() -\u0026gt; io:format(\"~p~n\",[erlang:group_leader()]) end), ok.\n\u0026lt;0.24.0\u0026gt;\nok\n6\u0026gt; spawn(fun() -\u0026gt; io:format(\"~p~n\",[erlang:group_leader(io)]) end), ok.\n\u0026lt;0.24.0\u0026gt;\nok\n7\u0026gt; spawn(fun() -\u0026gt; io:format(\"~p~n\",[erlang:group_leader(test)]) end), ok.\n\u0026lt;0.31.0\u0026gt;\nok\n8\u0026gt; spawn(fun() -\u0026gt; io:format(\"~p~n\",[erlang:process_info(self())]) end), ok.\n[{current_function,{erl_eval,do_apply,5}},\n {initial_call,{erlang,apply,2}},\n {status,running},\n {message_queue_len,0},\n {messages,[]},\n {links,[]},\n {dictionary,[]},\n {trap_exit,false},\n {error_handler,error_handler},\n {priority,normal},\n {group_leader,\u0026lt;0.24.0\u0026gt;},\n {group_leaders,[{test,\u0026lt;0.31.0\u0026gt;},{io,\u0026lt;0.24.0\u0026gt;}]},\n {total_heap_size,233},\n {heap_size,233},\n {stack_size,24},\n {reductions,93},\n {garbage_collection,[{min_bin_vheap_size,46368},\n                      {min_heap_size,233},\n                      {fullsweep_after,65535},\n                      {minor_gcs,0}]},\n {suspending,[]}]\nok\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003ch1\u003eMotivation\u003c/h1\u003e\n\n\u003cp\u003eThe I/O system is not the only domain where the concept of group leaders\ncomes in handy.  Implicit configurations, security groups and many other\nproblems could benefit from being able to extend the standard group leader\nmechanism.\u003c/p\u003e\n\n\u003cp\u003eOne of the potential uses of this technique could be an extension of the\nI/O leader paradigm into Web Development, with a \u003ccode\u003eweb\u003c/code\u003e group leader\nrepresented as an HTTP connection, WebSocket, or Session.  With this simple\napproach one can use the same technique used by I/O primitives to allow\ntransparent and/or multiplexed access to other HTTP communication channels,\nwithin either local or remote processes.\u003c/p\u003e\n\n\u003ch1\u003eRationale\u003c/h1\u003e\n\n\u003cp\u003eWe have chosen to extend the existing API instead of introducing a new one\nsimply because we believe this concept to be a natural evolution of the\ngroup leaders concept with which people are already familiar.\u003c/p\u003e\n\n\u003ch1\u003eBackwards Compatibility\u003c/h1\u003e\n\n\u003cp\u003eThe proposed changes keep existing API's intact and only provide some new\nfunctions for this pre-described functionality.  While this change maintains\nbackwards compatibility, the existing behaviour's are not altered and newly\nintroduced behaviour's are fashioned to mimic existing ones.\u003c/p\u003e\n\n\u003cp\u003eThe Proplist returned by \u003ccode\u003eerlang:process_info/1\u003c/code\u003e has all pre-existing keys\nunmodified and features, with the addition of a new key called \u003ccode\u003egroup_leaders\u003c/code\u003e.\nIn the unlikely event that code exists which relies on a specific set of keys\nused in this proplist, no backwards compatibility issues should exist.\u003c/p\u003e\n\n\u003ch1\u003eReference Implementation\u003c/h1\u003e\n\n\u003cp\u003eThere is no reference implementation at this point.  However, a proof\nof concept implementation is \u003ca href=\"https://github.com/spawngrid/otp/tree/group_leader_scope\"\u003eavailable\u003c/a\u003e.\u003c/p\u003e\n\n\u003ch1\u003eCopyright\u003c/h1\u003e\n\n\u003cp\u003eThis document has been placed in the public domain.\u003c/p\u003e\n"}},"__N_SSG":true},"page":"/eeps/[eep]","query":{"eep":"eep-0039"},"buildId":"7cVY434Wa3Wl232pkfXk2","nextExport":false,"isFallback":false,"gsp":true,"head":[["meta",{"charSet":"utf-8"}],["title",{"children":"Erlang Programming Language"}],["meta",{"httpEquiv":"Content-Type","content":"text/html;charset=utf-8"}],["meta",{"name":"description","content":"Erlang Programming Language"}],["meta",{"name":"keywords","content":"erlang, functional, programming, fault-tolerant, distributed, multi-platform, portable, software, multi-core, smp, concurrency"}],["meta",{"name":"viewport","content":"width=device-width, initial-scale=1.0"}],["link",{"rel":"alternate","type":"application/rss+xml","title":"Overall RSS 2.0 Feed","href":"/rss"}],["link",{"rel":"alternate","type":"application/rss+xml","title":"News RSS 2.0 Feed","href":"/rss/news"}],["link",{"rel":"alternate","type":"application/rss+xml","title":"Article RSS 2.0 Feed","href":"/rss/articles"}],["link",{"rel":"alternate","type":"application/rss+xml","title":"Events RSS 2.0 Feed","href":"/rss/event"}],["link",{"rel":"alternate","type":"application/rss+xml","title":"Downloads RSS 2.0 Feed","href":"/rss/download"}],["script",{"src":"https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"}],["script",{"src":"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js","integrity":"sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa","crossOrigin":"anonymous"}]]}</script><script nomodule="" src="/_next/static/chunks/polyfills-8bebc7aacc0076174a73.js"></script><script src="/_next/static/chunks/main-a9a86200c2afaf3f233a.js" async=""></script><script src="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/_next/static/chunks/framework.9707fddd9ae5927c17c3.js" async=""></script><script src="/_next/static/chunks/commons.8b4ad2366e12f882e3d5.js" async=""></script><script src="/_next/static/chunks/pages/_app-79f3144d8877c67ce98b.js" async=""></script><script src="/_next/static/chunks/87b308f4a72b1b263da2fe072492c20d1199252a.8368050723e578161621.js" async=""></script><script src="/_next/static/chunks/pages/eeps/%5Beep%5D-bde5f12f7c4b26eeb23e.js" async=""></script><script src="/_next/static/7cVY434Wa3Wl232pkfXk2/_buildManifest.js" async=""></script><script src="/_next/static/7cVY434Wa3Wl232pkfXk2/_ssgManifest.js" async=""></script></body></html>