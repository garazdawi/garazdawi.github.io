<!DOCTYPE html><html><head><meta charSet="utf-8"/><title>Erlang Programming Language</title><meta http-equiv="Content-Type" content="text/html;charset=utf-8"/><meta name="description" content="Erlang Programming Language"/><meta name="keywords" content="erlang, functional, programming, fault-tolerant, distributed, multi-platform, portable, software, multi-core, smp, concurrency"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="alternate" type="application/rss+xml" title="Overall RSS 2.0 Feed" href="/rss"/><link rel="alternate" type="application/rss+xml" title="News RSS 2.0 Feed" href="/rss/news"/><link rel="alternate" type="application/rss+xml" title="Article RSS 2.0 Feed" href="/rss/articles"/><link rel="alternate" type="application/rss+xml" title="Events RSS 2.0 Feed" href="/rss/event"/><link rel="alternate" type="application/rss+xml" title="Downloads RSS 2.0 Feed" href="/rss/download"/><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><link rel="preload" href="/_next/static/css/f91c265ba4ec340e076d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f91c265ba4ec340e076d.css" data-n-g=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/_next/static/chunks/main-a9a86200c2afaf3f233a.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.9707fddd9ae5927c17c3.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.8b4ad2366e12f882e3d5.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-79f3144d8877c67ce98b.js" as="script"/><link rel="preload" href="/_next/static/chunks/87b308f4a72b1b263da2fe072492c20d1199252a.8368050723e578161621.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/eeps/%5Beep%5D-bde5f12f7c4b26eeb23e.js" as="script"/></head><body><div id="__next"><div class="navbar" style="background-color:#FFF;margin-bottom:0px"><div class="container"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse" style="position:absolute;right:5px;margin-bottom:0px"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/"><img src="/img/erlang.png" width="60"/></a><div class="nav-collapse collapse navbar-responsive-collapse" style="padding:20px"><ul class="nav navbar-nav"><li><a class="menu-headlines" href="/downloads/"> DOWNLOADS </a></li><li><a class="menu-headlines" href="/docs/"> DOCUMENTATION </a></li><li><a class="menu-headlines" href="/community/"> COMMUNITY </a></li><li><a class="menu-headlines" href="/news/"> NEWS </a></li><li><a class="menu-headlines" href="/eeps/"> EEPS </a></li><li><a class="menu-headlines" href="/blog/"> BLOG </a></li><li><a class="menu-headlines" href="/about/"> ABOUT </a></li></ul></div></div></div><div class="container"><div class="row"><div class="col-lg-12"><div class="divider"><p></p></div></div><div class="static_div"><pre><code>Author: Sergey Prokhorov &lt;seriy(dot)pr(at)gmail(dot)com&gt;
Status: Accepted/23.0 Proposal is to be implemented in OTP release 23.0
Type: Standards Track
Erlang-Version: 23.0
Created: 07-Oct-2019
Post-History:
</code></pre>

<hr />

<h2><a href="/eeps/eep-0000" title="EEP Index">EEP</a> 51: <a href="eep-0051.md" title="EEP Source"> Underscore digit separator in numeric literals</a></h2>

<h1>Abstract</h1>

<p>This EEP extends numeric literal syntax, allowing underscore <code>_</code> as digits
separator. It extends syntax of integer, float and based integer literals.</p>

<h1>Copyright</h1>

<p>This document has been placed in the public domain.</p>

<h1>Specification</h1>

<p>Current syntax for numeric literals can be described by following scheme:</p>

<pre><code>DIGIT = [0-9]
BASE_DIGIT = [0-9a-zA-Z]
SIGN = [+-]

INTEGER = SIGN? DIGIT+

FLOAT = SIGN? DIGIT+ '.' DIGIT+ ('e' SIGN? DIGIT+)?

BASED_INTEGER = SIGN? DIGIT+ '#' BASE_DIGIT+
</code></pre>

<p>EEP extends this syntax by allowing single underscore <code>_</code> character as a
separator between two <code>DIGIT</code> or <code>BASE_DIGIT</code> characters. I.e., characters from
both left and right sides of <code>_</code> should be digits. Leading, trailing or repeated
underscores should not be allowed as well as underscores next to <code>-</code> <code>.</code> <code>#</code> <code>e</code>.
Separator is only used to visually separate groups of characters. It doesn't
change semantics of literal and is removed by lexer.</p>

<p>Following are examples of valid numeric literals:</p>

<pre><code>123_456
1_2_3_4_5
123_456.789_123
1.0e1_23
16#DEAD_BEEF
2#1100_1010_0011
</code></pre>

<p>And following are examples of literals that are not allowed:</p>

<pre><code>_123  % will be interpreted as variable name
123_
123__456  % only single underscore allowed
123_.456  % underscore can only separate digits, not other symbols
123._456
16#_1234
16#1234_
</code></pre>

<p>The underscores are to be lost when representing abstract forms or terms as
strings (<code>erl_pp</code>, <code>io_lib</code>).</p>

<h1>Motivation</h1>

<p>Digit separator becomes especially handy for relatively long literals like
thousands separator for decimals <code>Million = 1_000_000</code>, <code>SecondsInDay = 86_400</code>
byte separator for hexadecimal <code>16#DEAD_BEEF_CAFE</code>. Group separator makes
such literals more readable (when used wisely) and makes it easier to visualy
spot typos like <code>MicroSecond = Second * 100000</code>.
The digit separator feature was adopted by multiple programming languages
starting from at least Ada83.</p>

<h1>Rationale</h1>

<p>Underscore character was choosen as separator because it is used by multiple
other languages such as "Ada 83", "C#", "Java 7", "Perl 2.0", "Python 3.6",
"Ruby", "Rust", "Swift" and "Go". Also it doesn't conflict with current Erlang
syntax (unlike, for example, <code>,</code>).
The only ambiguous decision was about where exactly digit separators should be
allowed. It was decided that underscore should be allowed only between digits
as meant by being a "digit separator".</p>

<h1>Backwards Compatibility</h1>

<p>All existing Erlang code remains acceptable. The implementation is done
entirely in the Erlang lexer, so, no changes are needed in parser and
even tools that examine ASTs will be unaffected.
External tools like code editors and syntax highlighters might need to be
updated to be able to recognize new syntax for numeric literals.</p>

<h1>Reference Implementation</h1>

<p>The reference implementation is provided in a form of pull-request on GitHub</p>

<pre><code>https://github.com/erlang/otp/pull/2324
</code></pre>
</div></div></div><div class="container"><div class="row"><div class="col-lg-12"><div class="divider"><p></p></div></div><div class="col-lg-12 text-center"><div class="col-lg-4"><a title="DOWNLOAD" href="/download.html"><img src="/img/download.png"/></a></div><div class="col-lg-4"><a href="http://www.github.com/erlang/otp/"><img src="/img/GitHub-Mark-32px.png"/></a></div><div class="col-lg-4"><a href="http://www.twitter.com/erlang_org/"><img src="/img/twitter.png" width="32"/></a></div></div><div class="col-lg-12"><div class="divider"><p></p></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"index":{"id":"0051","content":"\u003cpre\u003e\u003ccode\u003eAuthor: Sergey Prokhorov \u0026lt;seriy(dot)pr(at)gmail(dot)com\u0026gt;\nStatus: Accepted/23.0 Proposal is to be implemented in OTP release 23.0\nType: Standards Track\nErlang-Version: 23.0\nCreated: 07-Oct-2019\nPost-History:\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003chr /\u003e\n\n\u003ch2\u003e\u003ca href=\"/eeps/eep-0000\" title=\"EEP Index\"\u003eEEP\u003c/a\u003e 51: \u003ca href=\"eep-0051.md\" title=\"EEP Source\"\u003e Underscore digit separator in numeric literals\u003c/a\u003e\u003c/h2\u003e\n\n\u003ch1\u003eAbstract\u003c/h1\u003e\n\n\u003cp\u003eThis EEP extends numeric literal syntax, allowing underscore \u003ccode\u003e_\u003c/code\u003e as digits\nseparator. It extends syntax of integer, float and based integer literals.\u003c/p\u003e\n\n\u003ch1\u003eCopyright\u003c/h1\u003e\n\n\u003cp\u003eThis document has been placed in the public domain.\u003c/p\u003e\n\n\u003ch1\u003eSpecification\u003c/h1\u003e\n\n\u003cp\u003eCurrent syntax for numeric literals can be described by following scheme:\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003eDIGIT = [0-9]\nBASE_DIGIT = [0-9a-zA-Z]\nSIGN = [+-]\n\nINTEGER = SIGN? DIGIT+\n\nFLOAT = SIGN? DIGIT+ '.' DIGIT+ ('e' SIGN? DIGIT+)?\n\nBASED_INTEGER = SIGN? DIGIT+ '#' BASE_DIGIT+\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003cp\u003eEEP extends this syntax by allowing single underscore \u003ccode\u003e_\u003c/code\u003e character as a\nseparator between two \u003ccode\u003eDIGIT\u003c/code\u003e or \u003ccode\u003eBASE_DIGIT\u003c/code\u003e characters. I.e., characters from\nboth left and right sides of \u003ccode\u003e_\u003c/code\u003e should be digits. Leading, trailing or repeated\nunderscores should not be allowed as well as underscores next to \u003ccode\u003e-\u003c/code\u003e \u003ccode\u003e.\u003c/code\u003e \u003ccode\u003e#\u003c/code\u003e \u003ccode\u003ee\u003c/code\u003e.\nSeparator is only used to visually separate groups of characters. It doesn't\nchange semantics of literal and is removed by lexer.\u003c/p\u003e\n\n\u003cp\u003eFollowing are examples of valid numeric literals:\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003e123_456\n1_2_3_4_5\n123_456.789_123\n1.0e1_23\n16#DEAD_BEEF\n2#1100_1010_0011\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003cp\u003eAnd following are examples of literals that are not allowed:\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003e_123  % will be interpreted as variable name\n123_\n123__456  % only single underscore allowed\n123_.456  % underscore can only separate digits, not other symbols\n123._456\n16#_1234\n16#1234_\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003cp\u003eThe underscores are to be lost when representing abstract forms or terms as\nstrings (\u003ccode\u003eerl_pp\u003c/code\u003e, \u003ccode\u003eio_lib\u003c/code\u003e).\u003c/p\u003e\n\n\u003ch1\u003eMotivation\u003c/h1\u003e\n\n\u003cp\u003eDigit separator becomes especially handy for relatively long literals like\nthousands separator for decimals \u003ccode\u003eMillion = 1_000_000\u003c/code\u003e, \u003ccode\u003eSecondsInDay = 86_400\u003c/code\u003e\nbyte separator for hexadecimal \u003ccode\u003e16#DEAD_BEEF_CAFE\u003c/code\u003e. Group separator makes\nsuch literals more readable (when used wisely) and makes it easier to visualy\nspot typos like \u003ccode\u003eMicroSecond = Second * 100000\u003c/code\u003e.\nThe digit separator feature was adopted by multiple programming languages\nstarting from at least Ada83.\u003c/p\u003e\n\n\u003ch1\u003eRationale\u003c/h1\u003e\n\n\u003cp\u003eUnderscore character was choosen as separator because it is used by multiple\nother languages such as \"Ada 83\", \"C#\", \"Java 7\", \"Perl 2.0\", \"Python 3.6\",\n\"Ruby\", \"Rust\", \"Swift\" and \"Go\". Also it doesn't conflict with current Erlang\nsyntax (unlike, for example, \u003ccode\u003e,\u003c/code\u003e).\nThe only ambiguous decision was about where exactly digit separators should be\nallowed. It was decided that underscore should be allowed only between digits\nas meant by being a \"digit separator\".\u003c/p\u003e\n\n\u003ch1\u003eBackwards Compatibility\u003c/h1\u003e\n\n\u003cp\u003eAll existing Erlang code remains acceptable. The implementation is done\nentirely in the Erlang lexer, so, no changes are needed in parser and\neven tools that examine ASTs will be unaffected.\nExternal tools like code editors and syntax highlighters might need to be\nupdated to be able to recognize new syntax for numeric literals.\u003c/p\u003e\n\n\u003ch1\u003eReference Implementation\u003c/h1\u003e\n\n\u003cp\u003eThe reference implementation is provided in a form of pull-request on GitHub\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003ehttps://github.com/erlang/otp/pull/2324\n\u003c/code\u003e\u003c/pre\u003e\n"}},"__N_SSG":true},"page":"/eeps/[eep]","query":{"eep":"eep-0051"},"buildId":"mwcz5f45UeFOBiRtaG40v","nextExport":false,"isFallback":false,"gsp":true,"head":[["meta",{"charSet":"utf-8"}],["title",{"children":"Erlang Programming Language"}],["meta",{"httpEquiv":"Content-Type","content":"text/html;charset=utf-8"}],["meta",{"name":"description","content":"Erlang Programming Language"}],["meta",{"name":"keywords","content":"erlang, functional, programming, fault-tolerant, distributed, multi-platform, portable, software, multi-core, smp, concurrency"}],["meta",{"name":"viewport","content":"width=device-width, initial-scale=1.0"}],["link",{"rel":"alternate","type":"application/rss+xml","title":"Overall RSS 2.0 Feed","href":"/rss"}],["link",{"rel":"alternate","type":"application/rss+xml","title":"News RSS 2.0 Feed","href":"/rss/news"}],["link",{"rel":"alternate","type":"application/rss+xml","title":"Article RSS 2.0 Feed","href":"/rss/articles"}],["link",{"rel":"alternate","type":"application/rss+xml","title":"Events RSS 2.0 Feed","href":"/rss/event"}],["link",{"rel":"alternate","type":"application/rss+xml","title":"Downloads RSS 2.0 Feed","href":"/rss/download"}],["script",{"src":"https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"}],["script",{"src":"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js","integrity":"sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa","crossOrigin":"anonymous"}]]}</script><script nomodule="" src="/_next/static/chunks/polyfills-8bebc7aacc0076174a73.js"></script><script src="/_next/static/chunks/main-a9a86200c2afaf3f233a.js" async=""></script><script src="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/_next/static/chunks/framework.9707fddd9ae5927c17c3.js" async=""></script><script src="/_next/static/chunks/commons.8b4ad2366e12f882e3d5.js" async=""></script><script src="/_next/static/chunks/pages/_app-79f3144d8877c67ce98b.js" async=""></script><script src="/_next/static/chunks/87b308f4a72b1b263da2fe072492c20d1199252a.8368050723e578161621.js" async=""></script><script src="/_next/static/chunks/pages/eeps/%5Beep%5D-bde5f12f7c4b26eeb23e.js" async=""></script><script src="/_next/static/mwcz5f45UeFOBiRtaG40v/_buildManifest.js" async=""></script><script src="/_next/static/mwcz5f45UeFOBiRtaG40v/_ssgManifest.js" async=""></script></body></html>