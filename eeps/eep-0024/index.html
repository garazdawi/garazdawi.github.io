<!DOCTYPE html><html><head><meta charSet="utf-8"/><title>Erlang Programming Language</title><meta http-equiv="Content-Type" content="text/html;charset=utf-8"/><meta name="description" content="Erlang Programming Language"/><meta name="keywords" content="erlang, functional, programming, fault-tolerant, distributed, multi-platform, portable, software, multi-core, smp, concurrency"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="alternate" type="application/rss+xml" title="Overall RSS 2.0 Feed" href="/rss"/><link rel="alternate" type="application/rss+xml" title="News RSS 2.0 Feed" href="/rss/news"/><link rel="alternate" type="application/rss+xml" title="Article RSS 2.0 Feed" href="/rss/articles"/><link rel="alternate" type="application/rss+xml" title="Events RSS 2.0 Feed" href="/rss/event"/><link rel="alternate" type="application/rss+xml" title="Downloads RSS 2.0 Feed" href="/rss/download"/><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><link rel="preload" href="/_next/static/css/4ee9685e1cc0da7f69f0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/4ee9685e1cc0da7f69f0.css" data-n-g=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/_next/static/chunks/main-a9a86200c2afaf3f233a.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.9707fddd9ae5927c17c3.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.8b4ad2366e12f882e3d5.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-290342a5f5c41b7caf9d.js" as="script"/><link rel="preload" href="/_next/static/chunks/87b308f4a72b1b263da2fe072492c20d1199252a.8368050723e578161621.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/eeps/%5Beep%5D-bde5f12f7c4b26eeb23e.js" as="script"/></head><body><div id="__next"><div class="navbar" style="background-color:#FFF;margin-bottom:0px"><div class="container"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse" style="position:absolute;right:5px;margin-bottom:0px"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/"><img src="/img/erlang.png" width="60"/></a><div class="nav-collapse collapse navbar-responsive-collapse" style="padding:20px"><ul class="nav navbar-nav"><li><a class="menu-headlines" href="/downloads/"> DOWNLOADS </a></li><li><a class="menu-headlines" href="/docs/"> DOCUMENTATION </a></li><li><a class="menu-headlines" href="/community/"> COMMUNITY </a></li><li><a class="menu-headlines" href="/news/"> NEWS </a></li><li><a class="menu-headlines" href="/eeps/"> EEPS </a></li><li><a class="menu-headlines" href="/blog/"> BLOG </a></li><li><a class="menu-headlines" href="/about/"> ABOUT </a></li></ul></div></div></div><div class="container"><div class="row"><div class="col-lg-12"><div class="divider"><p></p></div></div><div class="static_div"><pre><code>Author: Richard A. O'Keefe &lt;ok(at)cs(dot)otago(dot)ac(dot)nz&gt;
Status: Final/R12B-5 Proposal is implemented in OTP release R12B-5
Type: Standards Track
Erlang-Version: R12B-4
Created: 22-Sep-2008
Post-History:
</code></pre>

<hr />

<h2><a href="/eeps/eep-0000" title="EEP Index">EEP</a> 24: <a href="eep-0024.md" title="EEP Source"> Functions may be named using <code>F/N</code> in all module attributes</a></h2>

<h1>Abstract</h1>

<p>Programmers will be allowed to name functions using the
<code>F/N</code> form (currently restricted to) <code>-export</code> and <code>-import</code>
in any module attribute.  The parser will convert this
to the existing <code>{F,N}</code> form so that downstream tools will
be unaffected.</p>

<h1>Specification</h1>

<p>In any module attribute the form <code>F/N</code> (where <code>F</code> is an atom and <code>N</code> is
a non-negative integer) should be converted to <code>{F,N}</code>, provided
that it is not in an expression that would be evaluated.</p>

<p>Other occurrences of <code>X/Y</code> are not addressed by this EEP.
In particular, occurrences of <code>X/Y</code> in <code>-record</code> or <code>-enum</code>
declarations would be evaluated, so are not affected.</p>

<h1>Motivation</h1>

<p>Compare</p>

<pre><code>-compile({inline,
    [{ukeymerge3_12,13}, {ukeymerge3_21,13},
     {rukeymerge3_12a,11}, {rukeymerge3_21a,13},
     {rukeymerge3_12b,12}, {rukeymerge3_21b,12}]}).

-deprecated(
    [{new_set,0},{set_to_list,1},{list_to_set,1},{subset,2}]).
</code></pre>

<p>with</p>

<pre><code>-compile({inline, [
    rukeymerge3_12a/11,
    rukeymerge3_12b/12,
    rukeymerge3_21a/13, 
    rukeymerge3_21b/12,
    ukeymerge3_12/13,
    ukeymerge3_21/13]}).

-deprecated([
    list_to_set/1,
    new_set/0,
    set_to_list/1,
    subset/2]).
</code></pre>

<p>The improvement in readability is noteworthy, especially if
authors switch to the Prolog practice of putting one <code>F/N</code> form
per line in alphabetic order in such lists.</p>

<p>The improvement in consistency is worth having:  it's no longer a
case of <code>new_set/0</code> in an <code>-export</code> or <code>-import</code> module attribute but
<code>{new_set,0}</code> in a <code>-deprecated</code> module attribute, it's the same in
all module attributes, making it easier to find those that mention
a particular function.</p>

<h1>Rationale</h1>

<p>Module attributes that contain real expressions, such as <code>-record</code>
(and, if it is accepted, <code>-enum</code>) require a certain amount of care.
I did consider allowing the <code>F/N</code> notation everywhere; after all,
an atom cannot be divided by an integer.  However, with the
<code>fun F/N</code> form available, there are these days very few occasions
to refer to a function as <code>{F,N}</code> in an expression.</p>

<p>Otherwise, <code>F/N</code> occurrences in <code>-export</code> and <code>-import</code> attributes are
currently converted to tuples (by farity_list), so this is just a
small matter of extending the notion elsewhere.  I cannot imagine
why this wasn't done years ago.</p>

<h1>Backwards Compatibility</h1>

<p>There are currently no attributes where <code>F/N</code> is accepted,
is not part of an expression to be evaluated, and does not
signify a function, and those where it does signify a function
already treat it as an <code>{F,N}</code> tuple.</p>

<p>No existing source code can be affected.</p>

<p>Progams using home-brew front ends instead of the Erlang
syntax tools, such as ones that want to preserve white
space, comments, and so on, will have to be extended by
their maintainers to recognise the new form.  It is
already the case that <code>{fred,3}</code> may be written in two
different ways in Erlang source form: <code>{fred,+3}</code> is also
allowed.  So such programs already have to cope with
multiple source forms with the same abstract form, and
this merely adds one more variant.</p>

<p>Programs generating Erlang source code should some day
be revised to generate the new form, but since the old form
is not being removed and not (in order to preserve the
value of recent books) even being deprecated, need not be.</p>

<h1>Reference Implementation</h1>

<p>A single clause needs to be added to the <code>normalise/1</code>
function in the parse.yrl file:</p>

<pre><code>%% Name/Arity case
normalise({op,_,'/',{atom,_,F},{integer,_,I}}) when I &gt;= 0 -&gt;
   {F,I};
</code></pre>

<p>just before the final clause, which raises an exception.
A context diff is provided <a href="eep-0024-1.diff" title="Diff to apply to parse.yrl">eep-0024-1.diff</a>.</p>

<h1>Copyright</h1>

<p>This document has been placed in the public domain.</p>
</div></div></div><div class="container"><div class="row"><div class="col-lg-12"><div class="divider"><p></p></div></div><div class="col-lg-12 text-center"><div class="col-lg-4"><a title="DOWNLOAD" href="/download.html"><img src="/img/download.png"/></a></div><div class="col-lg-4"><a href="http://www.github.com/erlang/otp/"><img src="/img/GitHub-Mark-32px.png"/></a></div><div class="col-lg-4"><a href="http://www.twitter.com/erlang_org/"><img src="/img/twitter.png" width="32"/></a></div></div><div class="col-lg-12"><div class="divider"><p></p></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"index":{"id":"0024","content":"\u003cpre\u003e\u003ccode\u003eAuthor: Richard A. O'Keefe \u0026lt;ok(at)cs(dot)otago(dot)ac(dot)nz\u0026gt;\nStatus: Final/R12B-5 Proposal is implemented in OTP release R12B-5\nType: Standards Track\nErlang-Version: R12B-4\nCreated: 22-Sep-2008\nPost-History:\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003chr /\u003e\n\n\u003ch2\u003e\u003ca href=\"/eeps/eep-0000\" title=\"EEP Index\"\u003eEEP\u003c/a\u003e 24: \u003ca href=\"eep-0024.md\" title=\"EEP Source\"\u003e Functions may be named using \u003ccode\u003eF/N\u003c/code\u003e in all module attributes\u003c/a\u003e\u003c/h2\u003e\n\n\u003ch1\u003eAbstract\u003c/h1\u003e\n\n\u003cp\u003eProgrammers will be allowed to name functions using the\n\u003ccode\u003eF/N\u003c/code\u003e form (currently restricted to) \u003ccode\u003e-export\u003c/code\u003e and \u003ccode\u003e-import\u003c/code\u003e\nin any module attribute.  The parser will convert this\nto the existing \u003ccode\u003e{F,N}\u003c/code\u003e form so that downstream tools will\nbe unaffected.\u003c/p\u003e\n\n\u003ch1\u003eSpecification\u003c/h1\u003e\n\n\u003cp\u003eIn any module attribute the form \u003ccode\u003eF/N\u003c/code\u003e (where \u003ccode\u003eF\u003c/code\u003e is an atom and \u003ccode\u003eN\u003c/code\u003e is\na non-negative integer) should be converted to \u003ccode\u003e{F,N}\u003c/code\u003e, provided\nthat it is not in an expression that would be evaluated.\u003c/p\u003e\n\n\u003cp\u003eOther occurrences of \u003ccode\u003eX/Y\u003c/code\u003e are not addressed by this EEP.\nIn particular, occurrences of \u003ccode\u003eX/Y\u003c/code\u003e in \u003ccode\u003e-record\u003c/code\u003e or \u003ccode\u003e-enum\u003c/code\u003e\ndeclarations would be evaluated, so are not affected.\u003c/p\u003e\n\n\u003ch1\u003eMotivation\u003c/h1\u003e\n\n\u003cp\u003eCompare\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003e-compile({inline,\n    [{ukeymerge3_12,13}, {ukeymerge3_21,13},\n     {rukeymerge3_12a,11}, {rukeymerge3_21a,13},\n     {rukeymerge3_12b,12}, {rukeymerge3_21b,12}]}).\n\n-deprecated(\n    [{new_set,0},{set_to_list,1},{list_to_set,1},{subset,2}]).\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003cp\u003ewith\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003e-compile({inline, [\n    rukeymerge3_12a/11,\n    rukeymerge3_12b/12,\n    rukeymerge3_21a/13, \n    rukeymerge3_21b/12,\n    ukeymerge3_12/13,\n    ukeymerge3_21/13]}).\n\n-deprecated([\n    list_to_set/1,\n    new_set/0,\n    set_to_list/1,\n    subset/2]).\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003cp\u003eThe improvement in readability is noteworthy, especially if\nauthors switch to the Prolog practice of putting one \u003ccode\u003eF/N\u003c/code\u003e form\nper line in alphabetic order in such lists.\u003c/p\u003e\n\n\u003cp\u003eThe improvement in consistency is worth having:  it's no longer a\ncase of \u003ccode\u003enew_set/0\u003c/code\u003e in an \u003ccode\u003e-export\u003c/code\u003e or \u003ccode\u003e-import\u003c/code\u003e module attribute but\n\u003ccode\u003e{new_set,0}\u003c/code\u003e in a \u003ccode\u003e-deprecated\u003c/code\u003e module attribute, it's the same in\nall module attributes, making it easier to find those that mention\na particular function.\u003c/p\u003e\n\n\u003ch1\u003eRationale\u003c/h1\u003e\n\n\u003cp\u003eModule attributes that contain real expressions, such as \u003ccode\u003e-record\u003c/code\u003e\n(and, if it is accepted, \u003ccode\u003e-enum\u003c/code\u003e) require a certain amount of care.\nI did consider allowing the \u003ccode\u003eF/N\u003c/code\u003e notation everywhere; after all,\nan atom cannot be divided by an integer.  However, with the\n\u003ccode\u003efun F/N\u003c/code\u003e form available, there are these days very few occasions\nto refer to a function as \u003ccode\u003e{F,N}\u003c/code\u003e in an expression.\u003c/p\u003e\n\n\u003cp\u003eOtherwise, \u003ccode\u003eF/N\u003c/code\u003e occurrences in \u003ccode\u003e-export\u003c/code\u003e and \u003ccode\u003e-import\u003c/code\u003e attributes are\ncurrently converted to tuples (by farity_list), so this is just a\nsmall matter of extending the notion elsewhere.  I cannot imagine\nwhy this wasn't done years ago.\u003c/p\u003e\n\n\u003ch1\u003eBackwards Compatibility\u003c/h1\u003e\n\n\u003cp\u003eThere are currently no attributes where \u003ccode\u003eF/N\u003c/code\u003e is accepted,\nis not part of an expression to be evaluated, and does not\nsignify a function, and those where it does signify a function\nalready treat it as an \u003ccode\u003e{F,N}\u003c/code\u003e tuple.\u003c/p\u003e\n\n\u003cp\u003eNo existing source code can be affected.\u003c/p\u003e\n\n\u003cp\u003eProgams using home-brew front ends instead of the Erlang\nsyntax tools, such as ones that want to preserve white\nspace, comments, and so on, will have to be extended by\ntheir maintainers to recognise the new form.  It is\nalready the case that \u003ccode\u003e{fred,3}\u003c/code\u003e may be written in two\ndifferent ways in Erlang source form: \u003ccode\u003e{fred,+3}\u003c/code\u003e is also\nallowed.  So such programs already have to cope with\nmultiple source forms with the same abstract form, and\nthis merely adds one more variant.\u003c/p\u003e\n\n\u003cp\u003ePrograms generating Erlang source code should some day\nbe revised to generate the new form, but since the old form\nis not being removed and not (in order to preserve the\nvalue of recent books) even being deprecated, need not be.\u003c/p\u003e\n\n\u003ch1\u003eReference Implementation\u003c/h1\u003e\n\n\u003cp\u003eA single clause needs to be added to the \u003ccode\u003enormalise/1\u003c/code\u003e\nfunction in the parse.yrl file:\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003e%% Name/Arity case\nnormalise({op,_,'/',{atom,_,F},{integer,_,I}}) when I \u0026gt;= 0 -\u0026gt;\n   {F,I};\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003cp\u003ejust before the final clause, which raises an exception.\nA context diff is provided \u003ca href=\"eep-0024-1.diff\" title=\"Diff to apply to parse.yrl\"\u003eeep-0024-1.diff\u003c/a\u003e.\u003c/p\u003e\n\n\u003ch1\u003eCopyright\u003c/h1\u003e\n\n\u003cp\u003eThis document has been placed in the public domain.\u003c/p\u003e\n"}},"__N_SSG":true},"page":"/eeps/[eep]","query":{"eep":"eep-0024"},"buildId":"ob9V3f7Iet6syJeg0QYgd","nextExport":false,"isFallback":false,"gsp":true,"head":[["meta",{"charSet":"utf-8"}],["title",{"children":"Erlang Programming Language"}],["meta",{"httpEquiv":"Content-Type","content":"text/html;charset=utf-8"}],["meta",{"name":"description","content":"Erlang Programming Language"}],["meta",{"name":"keywords","content":"erlang, functional, programming, fault-tolerant, distributed, multi-platform, portable, software, multi-core, smp, concurrency"}],["meta",{"name":"viewport","content":"width=device-width, initial-scale=1.0"}],["link",{"rel":"alternate","type":"application/rss+xml","title":"Overall RSS 2.0 Feed","href":"/rss"}],["link",{"rel":"alternate","type":"application/rss+xml","title":"News RSS 2.0 Feed","href":"/rss/news"}],["link",{"rel":"alternate","type":"application/rss+xml","title":"Article RSS 2.0 Feed","href":"/rss/articles"}],["link",{"rel":"alternate","type":"application/rss+xml","title":"Events RSS 2.0 Feed","href":"/rss/event"}],["link",{"rel":"alternate","type":"application/rss+xml","title":"Downloads RSS 2.0 Feed","href":"/rss/download"}],["script",{"src":"https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"}],["script",{"src":"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js","integrity":"sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa","crossOrigin":"anonymous"}]]}</script><script nomodule="" src="/_next/static/chunks/polyfills-8bebc7aacc0076174a73.js"></script><script src="/_next/static/chunks/main-a9a86200c2afaf3f233a.js" async=""></script><script src="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/_next/static/chunks/framework.9707fddd9ae5927c17c3.js" async=""></script><script src="/_next/static/chunks/commons.8b4ad2366e12f882e3d5.js" async=""></script><script src="/_next/static/chunks/pages/_app-290342a5f5c41b7caf9d.js" async=""></script><script src="/_next/static/chunks/87b308f4a72b1b263da2fe072492c20d1199252a.8368050723e578161621.js" async=""></script><script src="/_next/static/chunks/pages/eeps/%5Beep%5D-bde5f12f7c4b26eeb23e.js" async=""></script><script src="/_next/static/ob9V3f7Iet6syJeg0QYgd/_buildManifest.js" async=""></script><script src="/_next/static/ob9V3f7Iet6syJeg0QYgd/_ssgManifest.js" async=""></script></body></html>